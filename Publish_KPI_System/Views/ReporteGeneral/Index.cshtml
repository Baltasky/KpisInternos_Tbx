@using KPI_System.Models.ReporteGeneral
@model ReporteGeneralViewModel

@{
    ViewBag.Title = "Reporte General";
}

<div class="post d-flex flex-column-fluid">
    <div id="kt_content_container" class="container-fluid">
        <form id="FormReporteVentas" method="post">
            <div class="row g-3 g-xl-8">
                <div class="col-12">
                    <div class="card card-xl-stretch mb-5 mb-xl-8">
                        <div class="card-body py-3">
                            <div class="tab-content">
                                <div class="row">
                                    <div class="col-lg-12 fv-row">
                                        <div class="row">
                                            <div class="col-lg-2 fv-row mb-6">
                                                <label class="fs-7 form-label fw-bolder text-dark">PERIODO:</label>
                                                <div class="position-relative d-flex align-items-center fv-row">
                                                    <span class="svg-icon svg-icon-2 position-absolute ms-4"><i class="fas fa-calendar-alt fs-3"></i></span>
                                                    <input name="RangoFechas" id="RangoFechas" onchange="" class="form-control w-250px ps-13 p-2 fs-7" placeholder="Fecha Inicial - Fecha Fin" />
                                                </div>
                                            </div>
                                            <input id="EquiposSelect" name="EquiposSelect" type="hidden" />
                                            <div class="col-2 fv-row mb-2 pt-8">
                                                <button type="button" id="FormReporteVentasButton" class="btn btn-success p-3 fs-8 me-3"><i class="fas fa-chart-line"></i>Mostrar Reporte</button>
                                            </div>
                                        </div>
                                    </div>
                                   
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>

        <div class="card mb-5">
            <div class="card pt-0 card-flush ">
                <div class="card-header align-items-center py-5 gap-2 gap-md-5">
                    <div class="card-title">
                        <div class="d-flex align-items-center position-relative my-1">
                            <span class="svg-icon svg-icon-1 position-absolute ms-4"><i class="fas fa-search"></i></span>
                            <input type="text" Ventas-filter="search" class="form-control w-250px ps-13 p-2 me-20" placeholder="Filtrar en la tabla" />
                        </div>
                        <div id="TablaReporteVentas_export" class="d-none"></div>
                    </div>
                    <div class="text-center fw-bold fs-1">@Model.ReportePerido </div>
                    <div class="card-toolbar flex-row-fluid justify-content-end gap-5">
                        <button type="button" class="btn btn-light-primary" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end">
                            <span class="svg-icon svg-icon-1 position-absolute ms-4"></span>
                            <i class="fas fa-download"></i> Exportar Reporte
                        </button>
                        <div id="TablaReporteVentas_export_menu" class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-semibold fs-7 w-200px py-4" data-kt-menu="true">
                            <div class="menu-item px-3">
                                <a href="#" class="menu-link px-3" Ventas-export="excel">
                                    Export as excel &nbsp;&nbsp; <i class="fas fa-file-excel text-success fs-3"></i>
                                </a>
                            </div>
                            <div class="menu-item px-3">
                                <a href="#" class="menu-link px-3" Ventas-export="csv">
                                    Export as csv &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fas fa-file-csv text-info fs-3"></i>
                                </a>
                            </div>
                        </div>
                        <div id="TablaReporteVentas_buttons" class="d-none"></div>
                    </div>
                </div>
                <div class="card-body pt-0">
                    <div class="my-5">
                        <table id="kt_datatable_complex_header" class="table table-hover table-bordered border-gray-300 gy-2 gs-2">
                            <thead>
                                <tr class="fw-bold fs-7 text-uppercase ">
                                    <th colspan="12" class="border-bottom border-end text-center" style="background-color: #002060; color: white;">
                                        TABLERO DE DISTRIBUCIÓN DE CONTENEDORES
                                    </th>
                                    <th colspan="4" class="border-bottom text-center" style="background-color: #002060; color: white;">
                                        RENTABILIDAD DE HERRAMIENTAS
                                    </th>
                                    <th colspan="3" class="border-bottom text-center" style="background-color: #002060; color: white;">
                                        VENTA DE CONSUMIBLES
                                    </th>
                                    <th colspan="2" class="border-bottom text-center" style="background-color: #002060; color: white;">
                                        REGISTRO DE INCIDENCIAS
                                    </th>
                                </tr>
                                <tr class="fw-bold text-uppercase fs-7 px-7 text-white bg-primary">
                                    <th class="min-w-50px ps-2">No</th>
                                    <th class="min-w-150px ">Región	           </th>
                                    <th class="min-w-300px">UNIDAD OPERATIVA</th>
                                    <th class="min-w-50px">Equipo	           </th>
                                    <th class="min-w-150px">Actividad	       </th>
                                    <th class="min-w-200px">Pozo/Ubicación	   </th>
                                    <th class="min-w-150px">Días Generados	   </th>
                                    <th class="min-w-150px">Monto de Renta	   </th>
                                    <th class="min-w-100px">Tipo Paquete	   </th>
                                    <th class="min-w-100px">CONTENEDOR</th>
                                    <th class="min-w-100px">Partidas	       </th>
                                    <th class="min-w-150px">% Inventario      </th>
                                    <th class="min-w-1O0px">Solicitudes          </th>
                                    <th class="min-w-150px">Partidas Usadas      </th>
                                    <th class="min-w-150px">% Contractual        </th>
                                    <th class="min-w-150px">% Real Inv. Físico   </th>
                                    <th class="min-w-150px">Solicitudes         </th>
                                    <th class="min-w-150px">Partidas Usadas     </th>
                                    <th class="min-w-150px">Monto               </th>
                                    <th class="min-w-150px">Dañadas   </th>
                                    <th class="min-w-150px">Pérdidas  </th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (Model.ReporteGeneralList.Any())
                                {
                                    var Counter = 1;
                                    foreach (var item in Model.ReporteGeneralList)
                                    {
                                        var EQUIPOS = item.EQUIPO == 0 ? "TALLERES" : $"{item.EQUIPO}";
                                        <tr>
                                            <td>@Counter</td>
                                            <td>@item.ZONA                   </td>
                                            <td>@item.UOP                    </td>
                                            <td>@EQUIPOS             </td>
                                            <td>@item.Tipo                   </td>
                                            <td>@item.POZO                   </td>
                                            <td>@item.DiasGenerados          </td>
                                            <td>$ @item.MontoRenta             </td>
                                            <td>@item.TIPOCONTENEDOR         </td>
                                            @*<td>@item.MontoRentaContenedor                  </td>*@
                                            <td>@item.CONTENEDOR             </td>
                                            <td>@item.Partidas               </td>
                                            <td>@item.PorcentajeInvReal %</td>

                                            <td>@item.RENTADO            </td>
                                            <td>@item.PartidadRentadas     </td>
                                            <td><span class="badge py-3 px-4 fs-7 badge-light-@item.ColorPorcentContractual">@item.PorcentajeContractual %</span></td>
                                            <td><span class="badge py-3 px-4 fs-7 badge-light-@item.ColorPorcentInvFisico">@item.PorcentajeRealInvFisico %</span></td>

                                            <td>@item.VENDIDO           </td>
                                            <td>@item.PartidasVendidas    </td>
                                            <td>@item.MontoVentas                 </td>
                                            <td>@item.PartidasDanadas        </td>
                                            <td>@item.PartidasPerdidas       </td>
                                        </tr>

                                        Counter = Counter + 1;
                                    }
                                }


                            </tbody>
                        </table>


                    </div>
                </div>
            </div>
        </div>

    </div>
</div>


@section scripts {
    <script src="~/Scripts/ReporteGeneral/ReporteGeneral.js"></script>


}


